<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maxinmum-scale=2.0, user-scalable=yes" />
    <title>学习笔记： Python2.7-The official tutorial</title>
    <link rel="stylesheet" href="/assets/css/styles.css">
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>学习笔记： Python2.7-The official tutorial</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="学习笔记： Python2.7-The official tutorial" />
<meta name="author" content="杨永杰" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="点这里打开官方教程原文" />
<meta property="og:description" content="点这里打开官方教程原文" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-03-15T00:00:00+08:00" />
<script type="application/ld+json">
{"@type":"BlogPosting","url":"/studymemo/study-pythonTurorial.html","headline":"学习笔记： Python2.7-The official tutorial","dateModified":"2020-03-15T00:00:00+08:00","datePublished":"2020-03-15T00:00:00+08:00","author":{"@type":"Person","name":"杨永杰"},"mainEntityOfPage":{"@type":"WebPage","@id":"/studymemo/study-pythonTurorial.html"},"description":"点这里打开官方教程原文","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    </head>
  <body>
    <nav>
  
    <a href="/" >Home</a>
  
    <a href="/category.html" >Category</a>
  
    <a href="/book.html" >Book</a>
  
    <a href="/about.html" >About</a>
  
  <a href="https://searchonceforall.github.io/" target="_blank">Searcher</a>
  <div class="outsideLinks">
  ;-) <a href="https://yongjie_yang.gitee.io/">CN</a>
  <a href="https://yyjplus.github.io/">USA</a>
  </div>
</nav>

    <link rel="stylesheet" href="/assets/css/post.css">
<h1>学习笔记： Python2.7-The official tutorial</h1>
<p>15 Mar 2020 - 杨永杰</p>

<div class="PageNavigation">
  
    <a class="prev" href="/readmemo/read-fact.html">&laquo; 阅读笔记： 《事实》 - 汉斯</a>
  
  
</div>

<div class="page_content">
<p><a href="https://docs.python.org/2.7/tutorial/">点这里打开官方教程原文</a></p><br />
<br />
<h2 id="1whetting-your-appetite">1. Whetting Your Appetite</h2><br />
<br />
<p>Python is an interpreted language，无需编译链接。<br />
数据处理、GUI、游戏设计都能使用。它处理数据IO快捷，还能调用其他语言。而且有丰富的数据结构。</p><br />
<br />
<p>Python的程序紧凑而且可读，比起c/c++/java，实现起来更短小，因为：</p><br />
<ol><br />
  <li>高级数据类型，让复杂操作只需一个命令</li><br />
  <li>用缩进而不是括号来划分作用域</li><br />
  <li>无需预定义变量</li><br />
</ol><br />
<br />
<p>（PS：Python是用C来implement的）</p><br />
<br />
<h2 id="2using-the-python-interpreter">2. Using the Python Interpreter</h2><br />
<h3 id="21invoking-the-interpreter">2.1. Invoking the Interpreter</h3><br />
<p>在命令窗口输入python即可进入编译器，Control-D on Unix, Control-Z on Windows来退出（或者用quit() )<br />
执行命令：python -c command [arg] … ，最好用‘’来包着command，防止其中的空格被错用。<br />
调用module as script：python -m module [arg] …<br />
其他command line options:  <a href="https://docs.python.org/2.7/using/cmdline.html#using-on-general">https://docs.python.org/2.7/using/cmdline.html#using-on-general</a></p><br />
<br />
<p><strong>argument passing</strong><br />
the script name and additional arguments 都会变成string输入到sys.argv,其中sys.argv[0]是script名，例如“-c”,”printSomething”(module名）。</p><br />
<br />
<p><strong>interactive mode</strong><br />
primary prompt ：»&gt;<br />
secondary prompt：. . . （代表continuation lines，用于multi-line command）</p><br />
<br />
<h3 id="22the-interpreter-and-its-environment">2.2. The Interpreter and Its Environment</h3><br />
<p><strong>source code encoding</strong><br />
默认ASCII格式，要更改则使用以下的命令，并放在文件的第一行：<br />
<code class="highlighter-rouge">-*- coding: encoding -*- </code><br />
支持的encoding：<br />
 <a href="https://docs.python.org/2.7/library/codecs.html#standard-encodings">https://docs.python.org/2.7/library/codecs.html#standard-encodings</a></p><br />
<br />
<p>如果有Unix Shebang line，则放在第二行：<br />
#!/usr/bin/env python<br />
<code class="highlighter-rouge">-*- coding: cp1252 -*- </code></p><br />
<br />
<h2 id="3an-informal-introduction-to-python">3. An Informal Introduction to Python</h2><br />
<p>使用#来做注释，+-*/来计算。<br />
数字输入后，5的类型是int，5.0这种则是float。<br />
// 取整除法，floor，例如 17 // 3.0 return 5.0<br />
% 取余， 17 % 3 return 2<br />
** 指数， 5 ** 2 return 25<br />
= 赋值<br />
_ 最近的操作结果存在这里，例如 _ return 25, 不要对 _ 赋值，否则会创建一个本地变量并把这个功能覆盖掉。</p><br />
<br />
<p><strong>string</strong><br />
‘……’ or ”……“ , 用 \ 可以将其例外。<br />
如果不想例外，在前面标记r，代表是raw string：<br />
print r’C:\some\name’<br />
“"”…””“ or ’'’…’'’可以跨行输入string<br />
用+可以合并string，用*可以重复：<br />
<code class="highlighter-rouge">&gt;&gt;&gt; 3 * 'un' + 'ium'</code><br />
‘unununium’<br />
或者直接放在一起也可以合并（但不适用于变量），借此可以将长句分行：<br />
<code class="highlighter-rouge">&gt;&gt;&gt; 'Py' 'thon'</code><br />
‘Python’</p><br />
<br />
<p><strong>string可以index（但不可以修改）：</strong></p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><br />
&gt;&gt;&gt; word = 'Python'<br />
&gt;&gt;&gt; word[0] # character in position 0<br />
'P'<br />
&gt;&gt;&gt; word[5] # character in position 5<br />
'n'<br />
<br />
&gt;&gt;&gt; word[-1] # last character<br />
'n'<br />
&gt;&gt;&gt; word[-2] # second-last character<br />
'o'<br />
&gt;&gt;&gt; word[-6]<br />
'P'<br />
</code></pre></div></div><br />
<p>可以slicing</p><br />
<br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; word[:2] + word[2:]<br />
'Python'<br />
</code></pre></div></div><br />
<br />
<p>特殊字符就需要Unicode：<br />
<code class="highlighter-rouge">u' Hello\u0020World !' </code><br />
转换encoding<br />
<code class="highlighter-rouge">u"äöü".encode('utf-8') </code></p><br />
<br />
<p><strong>List</strong><br />
squares = [1, 4, 9, 16, 25]<br />
基本跟string一样能用index和slicing，但list可以修改其中的值。<br />
在末尾增加成员：suqares.append(36)<br />
List里面也可以有list，变成多维。</p><br />
<br />
<h2 id="4more-control-flow-tools">4. More Control Flow Tools</h2><br />
<p><strong>If elif else</strong><br />
eg:</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>if x &lt; 0:<br />
    x = 0<br />
elif x ==0:<br />
    x = 1<br />
else:<br />
    x = 2<br />
</code></pre></div></div><br />
<br />
<p><strong>for</strong><br />
eg:</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>for n in squares:<br />
    print n<br />
</code></pre></div></div><br />
<p>如果要更改循环体，可以用slice来创建一个临时副本：</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>for n in squares[:]:<br />
    if n &gt; 5:<br />
          squares.insert(0,n)<br />
</code></pre></div></div><br />
<p>用<strong>range()</strong>来生成循环index：</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>for I in range(10):<br />
    print I #生成0到9的数<br />
</code></pre></div></div><br />
<p>range(0, 10, 3):<br />
[0, 3, 6, 9]</p><br />
<br />
<p>用<strong>break</strong>和<strong>continue</strong>来控制循环的跳转<br />
用<strong>else</strong>来控制for正常结束时的动作</p><br />
<br />
<p><strong>pass</strong><br />
不做任何事，用于占用一行。</p><br />
<br />
<p><strong>function</strong></p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def myFunc(n):<br />
    print n<br />
</code></pre></div></div><br />
<p><strong>给函数参数默认值</strong>：</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def myFunc(n=1, I=2, j=3):<br />
    print n,i,j<br />
</code></pre></div></div><br />
<p>从而可以在输入时省略某些参数<br />
参数的初始化只有一次，初始化后更改的值会被保存，例如：</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def f(a, L=[]):<br />
L.append(a)<br />
return L<br />
</code></pre></div></div><br />
<p>L的值每次调用后都会增加。</p><br />
<br />
<p><strong>利用keyword</strong>，例如 myFunc( I=7)</p><br />
<br />
<p><strong>指针</strong>：<br />
<code class="highlighter-rouge">def cheeseshop(kind, *arguments, **keywords): </code><br />
*必须在<strong>之前，*输入的是tuple，</strong>输入的是dictionary：<br />
或者调用时unpack：<br />
<code class="highlighter-rouge">range(*argv), 其中 argv = [3, 6] </code></p><br />
<br />
<p><strong>使用lambda</strong>定义小函数：<br />
<code class="highlighter-rouge">return lambda a,b:a+b </code>，返回两个输入参数的和</p><br />
<br />
<p><strong>coding style</strong><br />
Python use PEP8.</p><br />
<ul><br />
  <li><br />
    <p>缩进用4个space，不用tab</p><br />
  </li><br />
  <li><br />
    <p>每行不超过79 characters</p><br />
  </li><br />
  <li><br />
    <p>用空行分割函数和class</p><br />
  </li><br />
  <li><br />
    <p>在行尾写备注</p><br />
  </li><br />
  <li><br />
    <p>docstrings，“”“……”“”</p><br />
  </li><br />
  <li><br />
    <p>在操作符前后及逗号后加入space，圆括号不用加。</p><br />
  </li><br />
  <li><br />
    <p>命名：use CamelCase for classes and lower_case_with_underscores for functions and methods</p><br />
  </li><br />
  <li><br />
    <p>不用fancy encoding，例如emoji。</p><br />
  </li><br />
</ul><br />
<br />
<h2 id="5data-structures">5. Data Structures</h2><br />
<h3 id="51more-on-lists">5.1. More on Lists</h3><br />
<p><strong>常用methods</strong><br />
list.append(<em>x</em>) 在末尾增加x<br />
list.extend(<em>L</em>) 在末尾增加另一个list L<br />
list.insert(<em>I</em>, <em>x</em>) 在位置I增加x<br />
list.remove(<em>x</em>) 移除第一个x<br />
list.pop([<em>i</em>]) 移除位置i的数据并返回，i缺省返回末尾<br />
list.index(<em>x</em>) 返回第一个等于x的数据位置<br />
list.count(<em>x</em>) 返回x出现的次数<br />
list.sort(<em>cmp=None</em>, <em>key=None</em>, <em>reverse=False</em>) 排序<br />
list.reverse() 倒序<br />
借助append和pop，可以<strong>将list用作stack</strong>。<br />
将list用作queue的话效率较低，不如使用collections.deque。</p><br />
<br />
<p><strong>Functional Programming Tools :  filter() ,  map() , and  reduce()</strong></p><br />
<br />
<p><a href="https://docs.python.org/2.7/library/functions.html#filter">filter()</a></p><br />
<br />
<p><a href="https://docs.python.org/2.7/library/functions.html#map">map()</a></p><br />
<br />
<p><a href="https://docs.python.org/2.7/library/functions.html#reduce">reduce()</a><br />
filter(function, sequence)，返回所有sequence中令function返回true的，输入值list。</p><br />
<br />
<p>map(function, sequence)，返回function输入所有sequence中item的，返回值list。<br />
若输入参数有多个，则sequence也可以有多个，一一对应。</p><br />
<br />
<p>reduce(function, sequence)，返回递归调用的结果，首先读取头两个item，然后其结果和第三个item作为第二次输入，以此类推。<br />
也可以输入第三个参数作为初始结果，reduce(function, sequence, initValue)</p><br />
<br />
<p><strong>List Comprehensions</strong><br />
List可以用非常巧妙的方式创建：<br />
squares = [x**2 for x in range(10)]<br />
甚至使用for和if来构造（注意tuple的话需要有括号）：</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; [(x, y) for x in [1,2,3] for y in [3,1,4] if x != y]<br />
[(1, 3), (1, 4), (2, 3), (2, 1), (2, 4), (3, 1), (3, 4)]<br />
</code></pre></div></div><br />
<br />
<h3 id="52del">5.2. del</h3><br />
<p>删除list中的指定元素<br />
del a[0]<br />
del a[2:4]<br />
del a[:] 清空list a<br />
del a 删除a变量</p><br />
<br />
<h3 id="53tuples">5.3. Tuples</h3><br />
<p>与list一样，tuple是另一种sequence。<br />
tuple的元素由逗号，分割。可以nest，但<strong>不可以修改</strong>。<br />
构造的时候可以不带括号，但输出总会带着。</p><br />
<br />
<p>为了构造0 or 1个元素的tuple，需要特别操作：<br />
empty = ()<br />
singleton = ‘hello’, #末尾带个逗号</p><br />
<br />
<p><strong>pack</strong><br />
<code class="highlighter-rouge">t = 12345, 54321, 'hello!' </code><br />
<strong>unpack</strong><br />
<code class="highlighter-rouge">x, y, z = t </code></p><br />
<br />
<h3 id="54sets">5.4. Sets</h3><br />
<p>无序但无重复的数据集。例如将一个list去除重复项，set(list)<br />
用{}或set()来创建，空set只能用后者创建。</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; basket = ['apple', 'orange', 'apple', 'pear', 'orange', 'banana']<br />
&gt;&gt;&gt; fruit = set(basket) # create a set without duplicates<br />
&gt;&gt;&gt; fruit<br />
set(['orange', 'pear', 'apple', 'banana'])<br />
&gt;&gt;&gt; a = set('abracadabra')<br />
&gt;&gt;&gt; a # unique letters in a<br />
set(['a', 'r', 'b', 'c', 'd'])<br />
</code></pre></div></div><br />
<br />
<h3 id="55dictionaries">5.5. Dictionaries</h3><br />
<p>无序的key: value对, 要求key不可变。<br />
用dict={}可以创建空的字典。<br />
用dict()来创建字典。<br />
可以用del来删除某个key.<br />
keys()返回所有key的list。</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; tel = {'jack': 4098, 'sape': 4139}<br />
&gt;&gt;&gt; tel['guido'] = 4127 #增加元素<br />
&gt;&gt;&gt; dict([('sape', 4139), ('guido', 4127), ('jack', 4098)])<br />
&gt;&gt;&gt; dict(sape=4139, guido=4127, jack=4098)<br />
</code></pre></div></div><br />
<br />
<h3 id="56looping-techniques">5.6. Looping Techniques</h3><br />
<p><strong>enumerate()</strong><br />
同时返回index和内容</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; for I, v in enumerate(['tic', 'tac', 'toe']):<br />
...  print I, v<br />
</code></pre></div></div><br />
<br />
<p><strong>zip()</strong><br />
两个sequences同时，用zip将它们先组装起来：</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; questions = ['name', 'quest', 'favorite color']<br />
&gt;&gt;&gt; answers = ['lancelot', 'the holy grail', 'blue']<br />
&gt;&gt;&gt; for q, a in **zip**(questions, answers):<br />
...  print 'What is your {0}?  It is {1}.'.format(q, a)<br />
...<br />
What is your name?  It is lancelot.<br />
What is your quest?  It is the holy grail.<br />
What is your favorite color?  It is blue.<br />
</code></pre></div></div><br />
<br />
<p>特殊的loop操作<br />
倒序</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; for I in reversed(xrange(1,10,2)): # 用range函数也一样<br />
...  print I<br />
</code></pre></div></div><br />
<p>排序后</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; basket = ['apple', 'orange', 'apple', 'pear', 'orange', 'banana']<br />
&gt;&gt;&gt; for f in sorted(set(basket)):<br />
...  print f<br />
</code></pre></div></div><br />
<br />
<p>iteritems()<br />
同时返回dictionary的key和value</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; knights = {'gallahad': 'the pure', 'robin': 'the brave'}<br />
&gt;&gt;&gt; for k, v in knights.iteritems():<br />
...  print k, v<br />
</code></pre></div></div><br />
<br />
<h3 id="57more-on-conditions">5.7. More on Conditions</h3><br />
<p>条件和比较<br />
In， not in 用于确定是否存在<br />
Is, is not 用于对比两个对象是否为同一对象<br />
比较可以连环，例如 a &lt; b == c，等同于 a &lt; b and b == c<br />
and, or, not <br />
注意，条件里面不能赋值，所以不能出现=。</p><br />
<br />
<h3 id="58comparing-sequences-and-other-types">5.8. Comparing Sequences and Other Types</h3><br />
<p>同一种sequence可以互相比较（&lt;, ==, &gt;）,从头开始一个个元素进行比较，直到出现结果。</p><br />
<br />
<h2 id="6modules">6. Modules</h2><br />
<p>module可以导入其他module和main module之中，使用它所定义的变量和函数。<br />
在一个module内，它自身的名字存放在一个全局变量 <strong>name</strong> 之中（执行module时，<strong>name</strong>=<strong>main</strong>）。<br />
<code class="highlighter-rouge">&gt;&gt;&gt; import fibo </code><br />
就可以导入，然后用fibo.xxx来使用其中的变量。也可以将它们赋给本地变量f=fibo.xxx,那就可以用f来调用xxx。<br />
<code class="highlighter-rouge">&gt;&gt;&gt; from fibo import * </code><br />
这就导入所有变量（除掉那些下划线_开头的）。可以直接引用xxx。<br />
Or导入其中指定的函数<br />
<code class="highlighter-rouge">&gt;&gt;&gt; from fibo import fib, fib2 </code><br />
或者给它个新名字<br />
<code class="highlighter-rouge">&gt;&gt;&gt; import fibo as fib </code></p><br />
<br />
<p>.pyc是.py的二进制编译版，如果时间戳一致，就会用.pyc替代.py执行，从而节省加载时间（运行速度是一样的）。<br />
从命令行执行script不会生成.pyc，所以如果要加快加载速度，可以考虑用一个script来加载其他modules。<br />
用compileall可以将一个目录下的所有.py生成对应的.pyc。</p><br />
<br />
<h3 id="62standard-modules">6.2. Standard Modules</h3><br />
<p>Sys，最常用的标准库。<br />
修改系统路径PYTHONPYTH：</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; import sys<br />
&gt;&gt;&gt; sys.path.append('/ufs/guido/lib/python')<br />
</code></pre></div></div><br />
<br />
<h3 id="63the-dir-function">6.3. The  dir()  Function</h3><br />
<br />
<p><a href="https://docs.python.org/2.7/library/functions.html#dir">dir()</a><br />
返回某个module所定义的名称。</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; import fibo<br />
&gt;&gt;&gt; dir(fibo)<br />
['__name__', 'fib', 'fib2']<br />
</code></pre></div></div><br />
<p>如果不带参数，则返回目前所有定义的名称（除去builtin的，如果要看，则带上参数, dir(<strong>builtin</strong>)：</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; dir()<br />
['__builtins__', '__name__', '__package__', 'a', 'fib', 'fibo', 'sys']<br />
</code></pre></div></div><br />
<br />
<h3 id="64packages">6.4. Packages</h3><br />
<p>将modules打包。如果要将一个目录当成package，那就需要在里面建一个名为”<strong>init</strong>.py”的文件，空的也没关系。<br />
<code class="highlighter-rouge">import item.subitem.subsubitem </code>这种使用，除了最后那个外，其他必须是package，而最后那个也不能是function、变量等，也只能是module或package。如果要使用里面具体的变量，用 from xx import xx.</p><br />
<br />
<p>6.4.1. Importing * From a Package<br />
除非在”<strong>init</strong>.py”中定义了__all__ , 否则只会导入这个文件里面的东西。import * 是一种不被推荐的操作。</p><br />
<br />
<p>6.4.2. Intra-package References<br />
Package中的module互相引用比较多，可以用绝对地址和相对地址来引用。<br />
相对地址的使用要注意，如果作为main使用的时候，可能找不到其他module（因为不是整个package都导入了）。</p><br />
<br />
<h2 id="7input-and-output">7. Input and Output</h2><br />
<h3 id="71fancier-output-formatting">7.1. Fancier Output Formatting</h3><br />
<p>用str() repr()来将其他转换成字符串，repr特别是给电脑看的，而str给人看，多数情况差不多。<br />
很多method用来调整显示：<br />
.rjust(2), 靠右显示且宽度2</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>print '{0:2d} {1:3d} {2:4d}'.format(x, x*x, x*x*x)  #变量1,2,3 宽度分别是2，3，4，且是整数<br />
 [str.zfill()](https://docs.python.org/2.7/library/stdtypes.html#str.zfill) 用0填充<br />
&gt;&gt;&gt; '12'.zfill(5)<br />
'00012'<br />
</code></pre></div></div><br />
<p>空着，用数字代表位置，用key指代都可以：</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; print 'We are the {} who say "{}!"'.format('knights', 'Ni')<br />
We are the knights who say "Ni!"<br />
<br />
&gt;&gt;&gt; print 'The story of {0}, {1}, and {other}.'.format('Bill', 'Manfred',<br />
...                                                    other='Georg')<br />
The story of Bill, Manfred, and Georg.<br />
</code></pre></div></div><br />
<p>用现有的dictionary：</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; table = {'Sjoerd': 4127, 'Jack': 4098, 'Dcab': 8637678}<br />
&gt;&gt;&gt; print ('Jack: {0[Jack]:d}; Sjoerd: {0[Sjoerd]:d}; '<br />
...        'Dcab: {0[Dcab]:d}'.format(table))<br />
Jack: 4098; Sjoerd: 4127; Dcab: 8637678<br />
</code></pre></div></div><br />
<p>or</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; table = {'Sjoerd': 4127, 'Jack': 4098, 'Dcab': 8637678}<br />
&gt;&gt;&gt; print 'Jack: {Jack:d}; Sjoerd: {Sjoerd:d}; Dcab: {Dcab:d}'.format(**table)<br />
Jack: 4098; Sjoerd: 4127; Dcab: 8637678<br />
</code></pre></div></div><br />
<p>旧式的print也支持：</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; import math<br />
&gt;&gt;&gt; print 'The value of PI is approximately %5.3f.' % math.pi<br />
The value of PI is approximately 3.142.<br />
</code></pre></div></div><br />
<br />
<h3 id="72reading-and-writing-files">7.2. Reading and Writing Files</h3><br />
<p>open(filename, mode) 打开并返回一个文件的object，模式：w, r, a, r+, 默认是r。<br />
注意：读写文本的时候，python会自动改变换行符的格式（Windows和linux有不同格式）。<br />
7.2.1. Methods of File Objects<br />
f.read(size) 读取指定大小的数据，size如果是负数或者省略，就会读全部内容。<br />
f.readline() 读一行<br />
f.readlins() or list(f) 读取所有行并返回一个list<br />
f.write(string) 写字符串，不是的先转成string<br />
f.tell() 返回当前的位置<br />
f.seek(offset, from_what) 定位到指定位置，from_what默认0（头部），1（当前），2（尾部）。<br />
f.close() 关闭文件<br />
用with语句来打开文件，离开with的范围后就会自动close，包括exception跳出的时候。</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; with open('workfile', 'r') as f:<br />
...    read_data = f.read()<br />
&gt;&gt;&gt; f.closed<br />
True<br />
</code></pre></div></div><br />
<br />
<p>7.2.2. Saving structured data with  json</p><br />
<br />
<p><a href="https://docs.python.org/2.7/library/json.html#module-json">json</a><br />
JavaScript Object Notation<br />
查看某个object的json形式：</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; import json<br />
&gt;&gt;&gt; json.dumps([1, 'simple', 'list'])<br />
'[1, "simple", "list"]'<br />
</code></pre></div></div><br />
<p>写入（code）：<br />
<code class="highlighter-rouge">json.dump(x, f) </code><br />
读取（decode）：<br />
<code class="highlighter-rouge">x = json.load(f) </code></p><br />
<br />
<h2 id="8errors-and-exceptions">8. Errors and Exceptions</h2><br />
<p>最常见的有两种：<br />
Syntax Errors: 语法错误。各种调用不正确都是这类。<br />
Exceptions: 语法没错，但执行是发生错误。例如零除。报错时会带上错误的名称。</p><br />
<br />
<h3 id="83handling-exceptions">8.3. Handling Exceptions</h3><br />
<p>用try except语句：</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import sys<br />
<br />
try:<br />
    f = open('myfile.txt')<br />
    s = f.readline()<br />
    i = int(s.strip())<br />
except IOError as e:<br />
    print "I/O error({0}): {1}".format(e.errno, e.strerror)<br />
except ValueError:<br />
    print "Could not convert data to an integer."<br />
except:<br />
    print "Unexpected error:", sys.exc_info()[0]<br />
    Raise #对不知道怎么处理的，抛给系统<br />
else:<br />
    print 'The try clause works fine.'<br />
</code></pre></div></div><br />
<p>调用的函数出错也会raise exception。</p><br />
<br />
<h3 id="84raising-exceptions">8.4. Raising Exceptions</h3><br />
<p>主动raise也可以。</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; raise NameError('HiThere')<br />
Traceback (most recent call last):<br />
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;<br />
NameError: HiThere<br />
</code></pre></div></div><br />
<br />
<h3 id="85user-defined-exceptions">8.5. User-defined Exceptions</h3><br />
<p>也可以自己定义。</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; class MyError(Exception):<br />
...    def __init__(self, value):<br />
...        self.value = value<br />
...    def __str__(self):<br />
...        return repr(self.value)<br />
...<br />
&gt;&gt;&gt; try:<br />
...    raise MyError(2*2)<br />
... except MyError as e:<br />
...    print 'My exception occurred, value:', e.value<br />
...<br />
My exception occurred, value: 4<br />
&gt;&gt;&gt; raise MyError('oops!')<br />
Traceback (most recent call last):<br />
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;<br />
__main__.MyError: 'oops!'<br />
</code></pre></div></div><br />
<br />
<h3 id="86defining-clean-up-actions">8.6. Defining Clean-up Actions</h3><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; def divide(x, y):<br />
...    try:<br />
...        result = x / y<br />
...    except ZeroDivisionError:<br />
...        print "division by zero!"<br />
...    else:<br />
...        print "result is", result<br />
...    finally:<br />
...        print "executing finally clause"<br />
...<br />
</code></pre></div></div><br />
<p>离开try（无论怎样离开，包括break、exception、正常离开）都会执行finally的语句。</p><br />
<br />
<h3 id="87predefined-clean-up-actions">8.7. Predefined Clean-up Actions</h3><br />
<p>某些object会自带清理功能：with</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>with open("myfile.txt") as f:<br />
    for line in f:<br />
        print line,<br />
</code></pre></div></div><br />
<br />
<h2 id="9classes">9. Classes</h2><br />
<p>Python的class机制，与C++和Modula-3的类似。<br />
能够继承多个base class，可以复写继承的method，可以用同样的名字调用base class的method，object能包含任意的结构和数据.<br />
而且跟module在Python一样具有dynamic nature，class在runtime时create，而且create之后还能被修改。<br />
C++：所有class members默认是public，所有member functions是virtual。</p><br />
<br />
<h3 id="91a-word-about-names-and-objects">9.1. A Word About Names and Objects</h3><br />
<p>object都是独立存在的，而很多name都可以指定到同一个object。这就是aliasing，也被称为pointer。<br />
Python中可变的数据结构（list、dictionary等）使用aliasing传递数据可以增加效率。因为只需传递一个地址而不用处理两份数据的交互。</p><br />
<br />
<h3 id="92python-scopes-and-namespaces">9.2. Python Scopes and Namespaces</h3><br />
<p>A <em>namespace</em> is a mapping from names to objects.<br />
Examples of namespaces are:</p><br />
<ul><br />
  <li><br />
    <p>the set of built-in names (containing functions such as  <a href="https://docs.python.org/2.7/library/functions.html#abs">abs()</a> , and built-in exception names);</p><br />
  </li><br />
  <li><br />
    <p>the global names in a module;</p><br />
  </li><br />
  <li><br />
    <p>and the local names in a function invocation. </p><br />
  </li><br />
</ul><br />
<br />
<p><strong>Lifetime</strong><br />
built-in ：从interpreter开始到结束。<br />
module： 从导入到interpreter结束。<br />
function里的name： 从function开始到结束（exception离开也会结束，递归调用的函数都有各自local namespace）<br />
<strong>scope</strong><br />
常见规则。<br />
注意：只要没有声明是global的，那所有赋值操作都是local的。</p><br />
<br />
<p>9.3.1. Class Definition Syntax<br />
跟function一样，使用之前必须定义。而实际上，在函数里面、if里面定义都可以。</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class ClassName:<br />
    &lt;statement-1&gt;<br />
    .<br />
    .<br />
    .<br />
    &lt;statement-N&gt;<br />
</code></pre></div></div><br />
<br />
<p>9.3.2. Class Objects<br />
支持两种操作：attribute reference, instantiation.<br />
引用（obj.name）, 实例化（ x=MyClass() )<br />
初始化：定义函数 <strong>init</strong>()，则每次实例化都会自动初始化。</p><br />
<br />
<p>9.3.3. Instance Objects<br />
实例化后的class，依然可以新增attribute，但只对这个实例有效，而不会改变class的定义。<br />
例如对于 x=MyClass()，可以x.counter=1来增加一个变量，后续可以使用。<br />
另一种attribute的引用是method，是属于这个object的function。（在python中，除了class外，其他object，如list等也有method。对的，class不是唯一的object）</p><br />
<br />
<p>9.3.4. Method Objects<br />
x.f()是method object，不是function object。调用的时候等于MyClass.f(x), 是对这个function的引用，而输入参数是x。输入参数列表在找到function后会进行重构。</p><br />
<br />
<p>9.3.5. Class and Instance Variables<br />
class variable是所有class的实例公用的，而instance variable是每个实例单独的。<br />
当class variable是mutable的时候，就会导致所有实例都能更改这个值。</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Dog:<br />
<br />
    kind = 'canine'        # class variable shared by all instances<br />
<br />
    def __init__(self, name):<br />
        self.name = name    # instance variable unique to each instance<br />
</code></pre></div></div><br />
<br />
<p>上面的kind，其实在实例中也能修改，但实际上只是用一个instance variable覆盖掉，所以不会影响到其他实例。而若采用mutable的对象，如kind=[], 作为一个list，就能在不同实例中共享。所以list这种mutable attribute，除非故意，应该放在__init__中，定义成instance variable。</p><br />
<br />
<h3 id="94random-remarks">9.4. Random Remarks</h3><br />
<p>由于名字能够被覆盖，所以应该采用不同的命名体系来给它们命名。<br />
而class里的self，实际上对于python是没有实际意义的，没有也可以，只是为了方便理解。</p><br />
<br />
<h3 id="95inheritance">9.5. Inheritance</h3><br />
<p>class DerivedClassName(BaseClassName):<br />
也可以继承其他module的class<br />
class DerivedClassName(modname.BaseClassName):<br />
一个base class调用method，可能会调用了derived class的重构method（因为允许重构）。<br />
如果要调用base class的method，用BaseClassName.methodname(self, arguments)。</p><br />
<br />
<p>检查class的type：isinstance(obj, int)，它或它继承的class是int类型的，则返回true。<br />
检查class的继承关系：issubclass(bool, int)，bool是int的子类，所以这里返回true。</p><br />
<br />
<p><strong>Multiple Inheritance</strong><br />
多重继承<br />
class DerivedClassName(Base1, Base2, Base3):<br />
搜索顺序是depth-first， left to right.<br />
由于base class可能来源于相同的parent，所以新的搜索方式是动态的，它会线性化搜索路径，防止重复搜索同一个parent，而且这是monotonic的（subclass不会因为搜索顺序而变化）。<br />
（疑问：如果base1，base2有相同的attribute，搜索顺序的改变会不会影响到采用哪个attribute？目前来看，应该还是depth-first， left to right.）</p><br />
<br />
<h3 id="96private-variables-and-class-local-references">9.6. Private Variables and Class-local References</h3><br />
<p><strong>name mangling</strong><br />
在Python中，没有private这一类定义，而为了防止继承时错误重构、复写，采用以下机制：<br />
以 __ 开头的variable和method，后台会自动变成 _classname__xxx.</p><br />
<br />
<h3 id="97odds-and-ends">9.7. Odds and Ends</h3><br />
<p>一个空的class就可以用作C里面的struct</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Employee:<br />
    pass<br />
<br />
John = Employee()  # Create an empty employee record<br />
</code></pre></div></div><br />
<p>然后就可以输入想要的成员：<br />
john.name = ‘John Doe’<br />
john.dept = ‘computer lab’<br />
john.salary = 1000</p><br />
<br />
<h3 id="98exceptions-are-classes-too">9.8. Exceptions Are Classes Too</h3><br />
<p>也可以被继承。</p><br />
<br />
<h3 id="99iterators">9.9. Iterators</h3><br />
<p>For… in 语句其实就是用iter()来实现的，in实际上通过 .next()来获取下一个值。</p><br />
<br />
<h3 id="910generators">9.10. Generators</h3><br />
<p>是用来生成iterators的强力道具。<br />
跟普通function一样，但用yield来输出数据（不用return是因为返回数据后还要继续运行）</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def reverse(data):<br />
    for index in range(len(data)-1, -1, -1):<br />
        yield data[index]<br />
</code></pre></div></div><br />
<br />
<h3 id="911generator-expressions">9.11. Generator Expressions</h3><br />
<p>用一行语句来直接设计并马上使用generator</p><br />
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; sum(I*I for I in range(10))                # sum of squares<br />
285<br />
</code></pre></div></div><br />
<br />
<h2 id="10brief-tour-of-the-standard-library">10. Brief Tour of the Standard Library</h2><br />
<h2 id="and-11-part2-see-another-note-call-the-standard-library-of-python">and 11. Part2， see another note call ‘the Standard Library of Python’</h2><br />
<br />
<h2 id="and-to-learn-more">And to learn more:</h2><br />
<br />
<p><a href="https://docs.python.org/2.7/library/index.html#library-index">The Python Standard Library</a><br />
库的使用手册<br />
 <a href="https://docs.python.org/2.7/install/index.html#install-index">Installing Python Modules (Legacy version)</a><br />
如何安装其他用户的库<br />
 <a href="https://docs.python.org/2.7/reference/index.html#reference-index">The Python Language Reference</a><br />
Python语言手册</p><br />
<br />
<p><a href="https://www.python.org/">https://www.python.org</a><br />
官网<br />
 <a href="https://docs.python.org/">https://docs.python.org</a><br />
python官方文档<br />
 <a href="https://pypi.org/">https://pypi.org</a><br />
python package index，用户提供的库，整理成的目录<br />
 <a href="https://code.activestate.com/recipes/langs/python/">https://code.activestate.com/recipes/langs/python/</a><br />
Python的代码例子、模板等</p><br />

</div>

<div class="PageNavigation">
  
    <a class="prev" href="/readmemo/read-fact.html">&laquo; 阅读笔记： 《事实》 - 汉斯</a>
  
  
</div>

  </body>
</html>
