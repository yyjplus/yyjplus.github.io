<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maxinmum-scale=2.0, user-scalable=yes" />
    <title>学习笔记： Python2.7-The official tutorial</title>
    <link rel="stylesheet" href="/assets/css/styles.css">
    <link type="application/atom+xml" rel="alternate" href="/feed.xml" />
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>学习笔记： Python2.7-The official tutorial</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="学习笔记： Python2.7-The official tutorial" />
<meta name="author" content="杨永杰" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="点这里打开官方教程原文" />
<meta property="og:description" content="点这里打开官方教程原文" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-03-15T00:00:00+08:00" />
<script type="application/ld+json">
{"@type":"BlogPosting","headline":"学习笔记： Python2.7-The official tutorial","mainEntityOfPage":{"@type":"WebPage","@id":"/studymemo/study-pythonTurorial.html"},"url":"/studymemo/study-pythonTurorial.html","author":{"@type":"Person","name":"杨永杰"},"description":"点这里打开官方教程原文","dateModified":"2020-03-15T00:00:00+08:00","datePublished":"2020-03-15T00:00:00+08:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    </head>
  <body>
    <nav>
  
    <a href="/" >Home</a>
  
    <a href="/category.html" >Category</a>
  
    <a href="/book.html" >Book</a>
  
    <a href="/about.html" >About</a>
  
  <a href="https://searchonceforall.github.io/" target="_blank">Searcher</a>
  <div class="outsideLinks">
  ;-) <a href="https://yongjie_yang.gitee.io/">CN</a>
  <a href="https://yyjplus.github.io/">USA</a>
  </div>
</nav>

    <link rel="stylesheet" href="/assets/css/post.css">
<h1>学习笔记： Python2.7-The official tutorial</h1>
<p>15 Mar 2020 - 杨永杰</p>

<div class="PageNavigation">
  
    <a class="prev" href="/readmemo/read-fact.html">&laquo; 阅读笔记： 《事实》 - 汉斯</a>
  
  
</div>

<div class="page_content">
<p><a href="https://docs.python.org/2.7/tutorial/">点这里打开官方教程原文</a></p>

<h2 id="1whetting-your-appetite">1. Whetting Your Appetite</h2>

<p>Python is an interpreted language，无需编译链接。</p>

<p>数据处理、GUI、游戏设计都能使用。它处理数据IO快捷，还能调用其他语言。而且有丰富的数据结构。</p>

<p>Python的程序紧凑而且可读，比起c/c++/java，实现起来更短小，因为：</p>

<ol>
  <li>
    <p>高级数据类型，让复杂操作只需一个命令</p>
  </li>
  <li>
    <p>用缩进而不是括号来划分作用域</p>
  </li>
  <li>
    <p>无需预定义变量</p>
  </li>
</ol>

<p>（PS：Python是用C来implement的）</p>

<h2 id="2using-the-python-interpreter">2. Using the Python Interpreter</h2>

<h3 id="21invoking-the-interpreter">2.1. Invoking the Interpreter</h3>

<p>在命令窗口输入python即可进入编译器，Control-D on Unix, Control-Z on Windows来退出（或者用quit() )</p>

<p>执行命令：python -c command [arg] … ，最好用‘’来包着command，防止其中的空格被错用。</p>

<p>调用module as script：python -m module [arg] …</p>

<p>其他command line options:  <a href="https://docs.python.org/2.7/using/cmdline.html#using-on-general">https://docs.python.org/2.7/using/cmdline.html#using-on-general</a></p>

<p><strong>argument passing</strong></p>

<p>the script name and additional arguments 都会变成string输入到sys.argv,其中sys.argv[0]是script名，例如“-c”,”printSomething”(module名）。</p>

<p><strong>interactive mode</strong></p>

<p>primary prompt ：»&gt;</p>

<p>secondary prompt：. . . （代表continuation lines，用于multi-line command）</p>

<h3 id="22the-interpreter-and-its-environment">2.2. The Interpreter and Its Environment</h3>

<p><strong>source code encoding</strong></p>

<p>默认ASCII格式，要更改则使用以下的命令，并放在文件的第一行：</p>

<p><code class="highlighter-rouge">-*- coding: encoding -*- </code></p>

<p>支持的encoding：</p>

<p><a href="https://docs.python.org/2.7/library/codecs.html#standard-encodings">https://docs.python.org/2.7/library/codecs.html#standard-encodings</a></p>

<p>如果有Unix Shebang line，则放在第二行：</p>

<p>#!/usr/bin/env python</p>

<p><code class="highlighter-rouge">-*- coding: cp1252 -*- </code></p>

<h2 id="3an-informal-introduction-to-python">3. An Informal Introduction to Python</h2>

<p>使用#来做注释，+-*/来计算。</p>

<p>数字输入后，5的类型是int，5.0这种则是float。</p>

<p>// 取整除法，floor，例如 17 // 3.0 return 5.0</p>

<p>% 取余， 17 % 3 return 2</p>

<p>** 指数， 5 ** 2 return 25</p>

<p>= 赋值</p>

<p>_ 最近的操作结果存在这里，例如 _ return 25, 不要对 _ 赋值，否则会创建一个本地变量并把这个功能覆盖掉。</p>

<p><strong>string</strong></p>

<p>‘……’ or ”……“ , 用 \ 可以将其例外。</p>

<p>如果不想例外，在前面标记r，代表是raw string：</p>

<p>print r’C:\some\name’</p>

<p>”"”…””“ or ’'’…’'’可以跨行输入string</p>

<p>用+可以合并string，用*可以重复：</p>

<p><code class="highlighter-rouge">&gt;&gt;&gt; 3 * 'un' + 'ium'</code></p>

<p>‘unununium’</p>

<p>或者直接放在一起也可以合并（但不适用于变量），借此可以将长句分行：</p>

<p><code class="highlighter-rouge">&gt;&gt;&gt; 'Py' 'thon'</code></p>

<p>‘Python’</p>

<p><strong>string可以index（但不可以修改）：</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>


&gt;&gt;&gt; word = 'Python'

&gt;&gt;&gt; word[0] # character in position 0

'P'

&gt;&gt;&gt; word[5] # character in position 5

'n'



&gt;&gt;&gt; word[-1] # last character

'n'

&gt;&gt;&gt; word[-2] # second-last character

'o'

&gt;&gt;&gt; word[-6]

'P'

</code></pre></div></div>

<p>可以slicing</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&gt;&gt;&gt; word[:2] + word[2:]

'Python'

</code></pre></div></div>

<p>特殊字符就需要Unicode：</p>

<p><code class="highlighter-rouge">u' Hello\u0020World !' </code></p>

<p>转换encoding</p>

<p><code class="highlighter-rouge">u"äöü".encode('utf-8') </code></p>

<p><strong>List</strong></p>

<p>squares = [1, 4, 9, 16, 25]</p>

<p>基本跟string一样能用index和slicing，但list可以修改其中的值。</p>

<p>在末尾增加成员：suqares.append(36)</p>

<p>List里面也可以有list，变成多维。</p>

<h2 id="4more-control-flow-tools">4. More Control Flow Tools</h2>

<p><strong>If elif else</strong></p>

<p>eg:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
if x &lt; 0:

    x = 0

elif x ==0:

    x = 1

else:

    x = 2

</code></pre></div></div>

<p><strong>for</strong></p>

<p>eg:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
for n in squares:

    print n

</code></pre></div></div>

<p>如果要更改循环体，可以用slice来创建一个临时副本：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
for n in squares[:]:

    if n &gt; 5:

          squares.insert(0,n)

</code></pre></div></div>

<p>用<strong>range()</strong>来生成循环index：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
for I in range(10):

    print I #生成0到9的数

</code></pre></div></div>

<p>range(0, 10, 3):</p>

<p>[0, 3, 6, 9]</p>

<p>用<strong>break</strong>和<strong>continue</strong>来控制循环的跳转</p>

<p>用<strong>else</strong>来控制for正常结束时的动作</p>

<p><strong>pass</strong></p>

<p>不做任何事，用于占用一行。</p>

<p><strong>function</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
def myFunc(n):

    print n

</code></pre></div></div>

<p><strong>给函数参数默认值</strong>：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
def myFunc(n=1, I=2, j=3):

    print n,i,j

</code></pre></div></div>

<p>从而可以在输入时省略某些参数</p>

<p>参数的初始化只有一次，初始化后更改的值会被保存，例如：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
def f(a, L=[]):

L.append(a)

return L

</code></pre></div></div>

<p>L的值每次调用后都会增加。</p>

<p><strong>利用keyword</strong>，例如 myFunc( I=7)</p>

<p><strong>指针</strong>：</p>

<p><code class="highlighter-rouge">def cheeseshop(kind, *arguments, **keywords): </code></p>

<p>*必须在<strong>之前，*输入的是tuple，</strong>输入的是dictionary：</p>

<p>或者调用时unpack：</p>

<p><code class="highlighter-rouge">range(*argv), 其中 argv = [3, 6] </code></p>

<p><strong>使用lambda</strong>定义小函数：</p>

<p><code class="highlighter-rouge">return lambda a,b:a+b </code>，返回两个输入参数的和</p>

<p><strong>coding style</strong></p>

<p>Python use PEP8.</p>

<ul>
  <li>
    <p>缩进用4个space，不用tab</p>
  </li>
  <li>
    <p>每行不超过79 characters</p>
  </li>
  <li>
    <p>用空行分割函数和class</p>
  </li>
  <li>
    <p>在行尾写备注</p>
  </li>
  <li>
    <p>docstrings，“”“……”“”</p>
  </li>
  <li>
    <p>在操作符前后及逗号后加入space，圆括号不用加。</p>
  </li>
  <li>
    <p>命名：use CamelCase for classes and lower_case_with_underscores for functions and methods</p>
  </li>
  <li>
    <p>不用fancy encoding，例如emoji。</p>
  </li>
</ul>

<h2 id="5data-structures">5. Data Structures</h2>

<h3 id="51more-on-lists">5.1. More on Lists</h3>

<p><strong>常用methods</strong></p>

<p>list.append(<em>x</em>) 在末尾增加x</p>

<p>list.extend(<em>L</em>) 在末尾增加另一个list L</p>

<p>list.insert(<em>I</em>, <em>x</em>) 在位置I增加x</p>

<p>list.remove(<em>x</em>) 移除第一个x</p>

<p>list.pop([<em>i</em>]) 移除位置i的数据并返回，i缺省返回末尾</p>

<p>list.index(<em>x</em>) 返回第一个等于x的数据位置</p>

<p>list.count(<em>x</em>) 返回x出现的次数</p>

<p>list.sort(<em>cmp=None</em>, <em>key=None</em>, <em>reverse=False</em>) 排序</p>

<p>list.reverse() 倒序</p>

<p>借助append和pop，可以<strong>将list用作stack</strong>。</p>

<p>将list用作queue的话效率较低，不如使用collections.deque。</p>

<p><strong>Functional Programming Tools :  filter() ,  map() , and  reduce()</strong></p>

<p><a href="https://docs.python.org/2.7/library/functions.html#filter">filter()</a></p>

<p><a href="https://docs.python.org/2.7/library/functions.html#map">map()</a></p>

<p><a href="https://docs.python.org/2.7/library/functions.html#reduce">reduce()</a></p>

<p>filter(function, sequence)，返回所有sequence中令function返回true的，输入值list。</p>

<p>map(function, sequence)，返回function输入所有sequence中item的，返回值list。</p>

<p>若输入参数有多个，则sequence也可以有多个，一一对应。</p>

<p>reduce(function, sequence)，返回递归调用的结果，首先读取头两个item，然后其结果和第三个item作为第二次输入，以此类推。</p>

<p>也可以输入第三个参数作为初始结果，reduce(function, sequence, initValue)</p>

<p><strong>List Comprehensions</strong></p>

<p>List可以用非常巧妙的方式创建：</p>

<p>squares = [x**2 for x in range(10)]</p>

<p>甚至使用for和if来构造（注意tuple的话需要有括号）：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&gt;&gt;&gt; [(x, y) for x in [1,2,3] for y in [3,1,4] if x != y]

[(1, 3), (1, 4), (2, 3), (2, 1), (2, 4), (3, 1), (3, 4)]

</code></pre></div></div>

<h3 id="52del">5.2. del</h3>

<p>删除list中的指定元素</p>

<p>del a[0]</p>

<p>del a[2:4]</p>

<p>del a[:] 清空list a</p>

<p>del a 删除a变量</p>

<h3 id="53tuples">5.3. Tuples</h3>

<p>与list一样，tuple是另一种sequence。</p>

<p>tuple的元素由逗号，分割。可以nest，但<strong>不可以修改</strong>。</p>

<p>构造的时候可以不带括号，但输出总会带着。</p>

<p>为了构造0 or 1个元素的tuple，需要特别操作：</p>

<p>empty = ()</p>

<p>singleton = ‘hello’, #末尾带个逗号</p>

<p><strong>pack</strong></p>

<p><code class="highlighter-rouge">t = 12345, 54321, 'hello!' </code></p>

<p><strong>unpack</strong></p>

<p><code class="highlighter-rouge">x, y, z = t </code></p>

<h3 id="54sets">5.4. Sets</h3>

<p>无序但无重复的数据集。例如将一个list去除重复项，set(list)</p>

<p>用{}或set()来创建，空set只能用后者创建。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&gt;&gt;&gt; basket = ['apple', 'orange', 'apple', 'pear', 'orange', 'banana']

&gt;&gt;&gt; fruit = set(basket) # create a set without duplicates

&gt;&gt;&gt; fruit

set(['orange', 'pear', 'apple', 'banana'])

&gt;&gt;&gt; a = set('abracadabra')

&gt;&gt;&gt; a # unique letters in a

set(['a', 'r', 'b', 'c', 'd'])

</code></pre></div></div>

<h3 id="55dictionaries">5.5. Dictionaries</h3>

<p>无序的key: value对, 要求key不可变。</p>

<p>用dict={}可以创建空的字典。</p>

<p>用dict()来创建字典。</p>

<p>可以用del来删除某个key.</p>

<p>keys()返回所有key的list。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&gt;&gt;&gt; tel = {'jack': 4098, 'sape': 4139}

&gt;&gt;&gt; tel['guido'] = 4127 #增加元素

&gt;&gt;&gt; dict([('sape', 4139), ('guido', 4127), ('jack', 4098)])

&gt;&gt;&gt; dict(sape=4139, guido=4127, jack=4098)

</code></pre></div></div>

<h3 id="56looping-techniques">5.6. Looping Techniques</h3>

<p><strong>enumerate()</strong></p>

<p>同时返回index和内容</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&gt;&gt;&gt; for I, v in enumerate(['tic', 'tac', 'toe']):

...  print I, v

</code></pre></div></div>

<p><strong>zip()</strong></p>

<p>两个sequences同时，用zip将它们先组装起来：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&gt;&gt;&gt; questions = ['name', 'quest', 'favorite color']

&gt;&gt;&gt; answers = ['lancelot', 'the holy grail', 'blue']

&gt;&gt;&gt; for q, a in **zip**(questions, answers):

...  print 'What is your {0}?  It is {1}.'.format(q, a)

...

What is your name?  It is lancelot.

What is your quest?  It is the holy grail.

What is your favorite color?  It is blue.

</code></pre></div></div>

<p>特殊的loop操作</p>

<p>倒序</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&gt;&gt;&gt; for I in reversed(xrange(1,10,2)): # 用range函数也一样

...  print I

</code></pre></div></div>

<p>排序后</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&gt;&gt;&gt; basket = ['apple', 'orange', 'apple', 'pear', 'orange', 'banana']

&gt;&gt;&gt; for f in sorted(set(basket)):

...  print f

</code></pre></div></div>

<p>iteritems()</p>

<p>同时返回dictionary的key和value</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&gt;&gt;&gt; knights = {'gallahad': 'the pure', 'robin': 'the brave'}

&gt;&gt;&gt; for k, v in knights.iteritems():

...  print k, v

</code></pre></div></div>

<h3 id="57more-on-conditions">5.7. More on Conditions</h3>

<p>条件和比较</p>

<p>In， not in 用于确定是否存在</p>

<p>Is, is not 用于对比两个对象是否为同一对象</p>

<p>比较可以连环，例如 a &lt; b == c，等同于 a &lt; b and b == c</p>

<p>and, or, not </p>

<p>注意，条件里面不能赋值，所以不能出现=。</p>

<h3 id="58comparing-sequences-and-other-types">5.8. Comparing Sequences and Other Types</h3>

<p>同一种sequence可以互相比较（&lt;, ==, &gt;）,从头开始一个个元素进行比较，直到出现结果。</p>

<h2 id="6modules">6. Modules</h2>

<p>module可以导入其他module和main module之中，使用它所定义的变量和函数。</p>

<p>在一个module内，它自身的名字存放在一个全局变量 <strong>name</strong> 之中（执行module时，<strong>name</strong>=<strong>main</strong>）。</p>

<p><code class="highlighter-rouge">&gt;&gt;&gt; import fibo </code></p>

<p>就可以导入，然后用fibo.xxx来使用其中的变量。也可以将它们赋给本地变量f=fibo.xxx,那就可以用f来调用xxx。</p>

<p><code class="highlighter-rouge">&gt;&gt;&gt; from fibo import * </code></p>

<p>这就导入所有变量（除掉那些下划线_开头的）。可以直接引用xxx。</p>

<p>Or导入其中指定的函数</p>

<p><code class="highlighter-rouge">&gt;&gt;&gt; from fibo import fib, fib2 </code></p>

<p>或者给它个新名字</p>

<p><code class="highlighter-rouge">&gt;&gt;&gt; import fibo as fib </code></p>

<p>.pyc是.py的二进制编译版，如果时间戳一致，就会用.pyc替代.py执行，从而节省加载时间（运行速度是一样的）。</p>

<p>从命令行执行script不会生成.pyc，所以如果要加快加载速度，可以考虑用一个script来加载其他modules。</p>

<p>用compileall可以将一个目录下的所有.py生成对应的.pyc。</p>

<h3 id="62standard-modules">6.2. Standard Modules</h3>

<p>Sys，最常用的标准库。</p>

<p>修改系统路径PYTHONPYTH：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&gt;&gt;&gt; import sys

&gt;&gt;&gt; sys.path.append('/ufs/guido/lib/python')

</code></pre></div></div>

<h3 id="63the-dir-function">6.3. The  dir()  Function</h3>

<p><a href="https://docs.python.org/2.7/library/functions.html#dir">dir()</a></p>

<p>返回某个module所定义的名称。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&gt;&gt;&gt; import fibo

&gt;&gt;&gt; dir(fibo)

['__name__', 'fib', 'fib2']

</code></pre></div></div>

<p>如果不带参数，则返回目前所有定义的名称（除去builtin的，如果要看，则带上参数, dir(<strong>builtin</strong>)：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&gt;&gt;&gt; dir()

['__builtins__', '__name__', '__package__', 'a', 'fib', 'fibo', 'sys']

</code></pre></div></div>

<h3 id="64packages">6.4. Packages</h3>

<p>将modules打包。如果要将一个目录当成package，那就需要在里面建一个名为”<strong>init</strong>.py”的文件，空的也没关系。</p>

<p><code class="highlighter-rouge">import item.subitem.subsubitem </code>这种使用，除了最后那个外，其他必须是package，而最后那个也不能是function、变量等，也只能是module或package。如果要使用里面具体的变量，用 from xx import xx.</p>

<p>6.4.1. Importing * From a Package</p>

<p>除非在”<strong>init</strong>.py”中定义了__all__ , 否则只会导入这个文件里面的东西。import * 是一种不被推荐的操作。</p>

<p>6.4.2. Intra-package References</p>

<p>Package中的module互相引用比较多，可以用绝对地址和相对地址来引用。</p>

<p>相对地址的使用要注意，如果作为main使用的时候，可能找不到其他module（因为不是整个package都导入了）。</p>

<h2 id="7input-and-output">7. Input and Output</h2>

<h3 id="71fancier-output-formatting">7.1. Fancier Output Formatting</h3>

<p>用str() repr()来将其他转换成字符串，repr特别是给电脑看的，而str给人看，多数情况差不多。</p>

<p>很多method用来调整显示：</p>

<p>.rjust(2), 靠右显示且宽度2</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
print '{0:2d} {1:3d} {2:4d}'.format(x, x*x, x*x*x)  #变量1,2,3 宽度分别是2，3，4，且是整数

 [str.zfill()](https://docs.python.org/2.7/library/stdtypes.html#str.zfill) 用0填充

&gt;&gt;&gt; '12'.zfill(5)

'00012'

</code></pre></div></div>

<p>空着，用数字代表位置，用key指代都可以：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&gt;&gt;&gt; print 'We are the {} who say "{}!"'.format('knights', 'Ni')

We are the knights who say "Ni!"



&gt;&gt;&gt; print 'The story of {0}, {1}, and {other}.'.format('Bill', 'Manfred',

...                                                    other='Georg')

The story of Bill, Manfred, and Georg.

</code></pre></div></div>

<p>用现有的dictionary：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&gt;&gt;&gt; table = {'Sjoerd': 4127, 'Jack': 4098, 'Dcab': 8637678}

&gt;&gt;&gt; print ('Jack: {0[Jack]:d}; Sjoerd: {0[Sjoerd]:d}; '

...        'Dcab: {0[Dcab]:d}'.format(table))

Jack: 4098; Sjoerd: 4127; Dcab: 8637678

</code></pre></div></div>

<p>or</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&gt;&gt;&gt; table = {'Sjoerd': 4127, 'Jack': 4098, 'Dcab': 8637678}

&gt;&gt;&gt; print 'Jack: {Jack:d}; Sjoerd: {Sjoerd:d}; Dcab: {Dcab:d}'.format(**table)

Jack: 4098; Sjoerd: 4127; Dcab: 8637678

</code></pre></div></div>

<p>旧式的print也支持：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&gt;&gt;&gt; import math

&gt;&gt;&gt; print 'The value of PI is approximately %5.3f.' % math.pi

The value of PI is approximately 3.142.

</code></pre></div></div>

<h3 id="72reading-and-writing-files">7.2. Reading and Writing Files</h3>

<p>open(filename, mode) 打开并返回一个文件的object，模式：w, r, a, r+, 默认是r。</p>

<p>注意：读写文本的时候，python会自动改变换行符的格式（Windows和linux有不同格式）。</p>

<p>7.2.1. Methods of File Objects</p>

<p>f.read(size) 读取指定大小的数据，size如果是负数或者省略，就会读全部内容。</p>

<p>f.readline() 读一行</p>

<p>f.readlins() or list(f) 读取所有行并返回一个list</p>

<p>f.write(string) 写字符串，不是的先转成string</p>

<p>f.tell() 返回当前的位置</p>

<p>f.seek(offset, from_what) 定位到指定位置，from_what默认0（头部），1（当前），2（尾部）。</p>

<p>f.close() 关闭文件</p>

<p>用with语句来打开文件，离开with的范围后就会自动close，包括exception跳出的时候。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&gt;&gt;&gt; with open('workfile', 'r') as f:

...    read_data = f.read()

&gt;&gt;&gt; f.closed

True

</code></pre></div></div>

<p>7.2.2. Saving structured data with  json</p>

<p><a href="https://docs.python.org/2.7/library/json.html#module-json">json</a></p>

<p>JavaScript Object Notation</p>

<p>查看某个object的json形式：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&gt;&gt;&gt; import json

&gt;&gt;&gt; json.dumps([1, 'simple', 'list'])

'[1, "simple", "list"]'

</code></pre></div></div>

<p>写入（code）：</p>

<p><code class="highlighter-rouge">json.dump(x, f) </code></p>

<p>读取（decode）：</p>

<p><code class="highlighter-rouge">x = json.load(f) </code></p>

<h2 id="8errors-and-exceptions">8. Errors and Exceptions</h2>

<p>最常见的有两种：</p>

<p>Syntax Errors: 语法错误。各种调用不正确都是这类。</p>

<p>Exceptions: 语法没错，但执行是发生错误。例如零除。报错时会带上错误的名称。</p>

<h3 id="83handling-exceptions">8.3. Handling Exceptions</h3>

<p>用try except语句：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
import sys



try:

    f = open('myfile.txt')

    s = f.readline()

    i = int(s.strip())

except IOError as e:

    print "I/O error({0}): {1}".format(e.errno, e.strerror)

except ValueError:

    print "Could not convert data to an integer."

except:

    print "Unexpected error:", sys.exc_info()[0]

    Raise #对不知道怎么处理的，抛给系统

else:

    print 'The try clause works fine.'

</code></pre></div></div>

<p>调用的函数出错也会raise exception。</p>

<h3 id="84raising-exceptions">8.4. Raising Exceptions</h3>

<p>主动raise也可以。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&gt;&gt;&gt; raise NameError('HiThere')

Traceback (most recent call last):

  File "&lt;stdin&gt;", line 1, in &lt;module&gt;

NameError: HiThere

</code></pre></div></div>

<h3 id="85user-defined-exceptions">8.5. User-defined Exceptions</h3>

<p>也可以自己定义。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&gt;&gt;&gt; class MyError(Exception):

...    def __init__(self, value):

...        self.value = value

...    def __str__(self):

...        return repr(self.value)

...

&gt;&gt;&gt; try:

...    raise MyError(2*2)

... except MyError as e:

...    print 'My exception occurred, value:', e.value

...

My exception occurred, value: 4

&gt;&gt;&gt; raise MyError('oops!')

Traceback (most recent call last):

  File "&lt;stdin&gt;", line 1, in &lt;module&gt;

__main__.MyError: 'oops!'

</code></pre></div></div>

<h3 id="86defining-clean-up-actions">8.6. Defining Clean-up Actions</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&gt;&gt;&gt; def divide(x, y):

...    try:

...        result = x / y

...    except ZeroDivisionError:

...        print "division by zero!"

...    else:

...        print "result is", result

...    finally:

...        print "executing finally clause"

...

</code></pre></div></div>

<p>离开try（无论怎样离开，包括break、exception、正常离开）都会执行finally的语句。</p>

<h3 id="87predefined-clean-up-actions">8.7. Predefined Clean-up Actions</h3>

<p>某些object会自带清理功能：with</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
with open("myfile.txt") as f:

    for line in f:

        print line,

</code></pre></div></div>

<h2 id="9classes">9. Classes</h2>

<p>Python的class机制，与C++和Modula-3的类似。</p>

<p>能够继承多个base class，可以复写继承的method，可以用同样的名字调用base class的method，object能包含任意的结构和数据.</p>

<p>而且跟module在Python一样具有dynamic nature，class在runtime时create，而且create之后还能被修改。</p>

<p>C++：所有class members默认是public，所有member functions是virtual。</p>

<h3 id="91a-word-about-names-and-objects">9.1. A Word About Names and Objects</h3>

<p>object都是独立存在的，而很多name都可以指定到同一个object。这就是aliasing，也被称为pointer。</p>

<p>Python中可变的数据结构（list、dictionary等）使用aliasing传递数据可以增加效率。因为只需传递一个地址而不用处理两份数据的交互。</p>

<h3 id="92python-scopes-and-namespaces">9.2. Python Scopes and Namespaces</h3>

<p>A <em>namespace</em> is a mapping from names to objects.</p>

<p>Examples of namespaces are:</p>

<ul>
  <li>
    <p>the set of built-in names (containing functions such as  <a href="https://docs.python.org/2.7/library/functions.html#abs">abs()</a> , and built-in exception names);</p>
  </li>
  <li>
    <p>the global names in a module;</p>
  </li>
  <li>
    <p>and the local names in a function invocation. </p>
  </li>
</ul>

<p><strong>Lifetime</strong></p>

<p>built-in ：从interpreter开始到结束。</p>

<p>module： 从导入到interpreter结束。</p>

<p>function里的name： 从function开始到结束（exception离开也会结束，递归调用的函数都有各自local namespace）</p>

<p><strong>scope</strong></p>

<p>常见规则。</p>

<p>注意：只要没有声明是global的，那所有赋值操作都是local的。</p>

<p>9.3.1. Class Definition Syntax</p>

<p>跟function一样，使用之前必须定义。而实际上，在函数里面、if里面定义都可以。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
class ClassName:

    &lt;statement-1&gt;

    .

    .

    .

    &lt;statement-N&gt;

</code></pre></div></div>

<p>9.3.2. Class Objects</p>

<p>支持两种操作：attribute reference, instantiation.</p>

<p>引用（obj.name）, 实例化（ x=MyClass() )</p>

<p>初始化：定义函数 <strong>init</strong>()，则每次实例化都会自动初始化。</p>

<p>9.3.3. Instance Objects</p>

<p>实例化后的class，依然可以新增attribute，但只对这个实例有效，而不会改变class的定义。</p>

<p>例如对于 x=MyClass()，可以x.counter=1来增加一个变量，后续可以使用。</p>

<p>另一种attribute的引用是method，是属于这个object的function。（在python中，除了class外，其他object，如list等也有method。对的，class不是唯一的object）</p>

<p>9.3.4. Method Objects</p>

<p>x.f()是method object，不是function object。调用的时候等于MyClass.f(x), 是对这个function的引用，而输入参数是x。输入参数列表在找到function后会进行重构。</p>

<p>9.3.5. Class and Instance Variables</p>

<p>class variable是所有class的实例公用的，而instance variable是每个实例单独的。</p>

<p>当class variable是mutable的时候，就会导致所有实例都能更改这个值。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
class Dog:



    kind = 'canine'        # class variable shared by all instances



    def __init__(self, name):

        self.name = name    # instance variable unique to each instance

</code></pre></div></div>

<p>上面的kind，其实在实例中也能修改，但实际上只是用一个instance variable覆盖掉，所以不会影响到其他实例。而若采用mutable的对象，如kind=[], 作为一个list，就能在不同实例中共享。所以list这种mutable attribute，除非故意，应该放在__init__中，定义成instance variable。</p>

<h3 id="94random-remarks">9.4. Random Remarks</h3>

<p>由于名字能够被覆盖，所以应该采用不同的命名体系来给它们命名。</p>

<p>而class里的self，实际上对于python是没有实际意义的，没有也可以，只是为了方便理解。</p>

<h3 id="95inheritance">9.5. Inheritance</h3>

<p>class DerivedClassName(BaseClassName):</p>

<p>也可以继承其他module的class</p>

<p>class DerivedClassName(modname.BaseClassName):</p>

<p>一个base class调用method，可能会调用了derived class的重构method（因为允许重构）。</p>

<p>如果要调用base class的method，用BaseClassName.methodname(self, arguments)。</p>

<p>检查class的type：isinstance(obj, int)，它或它继承的class是int类型的，则返回true。</p>

<p>检查class的继承关系：issubclass(bool, int)，bool是int的子类，所以这里返回true。</p>

<p><strong>Multiple Inheritance</strong></p>

<p>多重继承</p>

<p>class DerivedClassName(Base1, Base2, Base3):</p>

<p>搜索顺序是depth-first， left to right.</p>

<p>由于base class可能来源于相同的parent，所以新的搜索方式是动态的，它会线性化搜索路径，防止重复搜索同一个parent，而且这是monotonic的（subclass不会因为搜索顺序而变化）。</p>

<p>（疑问：如果base1，base2有相同的attribute，搜索顺序的改变会不会影响到采用哪个attribute？目前来看，应该还是depth-first， left to right.）</p>

<h3 id="96private-variables-and-class-local-references">9.6. Private Variables and Class-local References</h3>

<p><strong>name mangling</strong></p>

<p>在Python中，没有private这一类定义，而为了防止继承时错误重构、复写，采用以下机制：</p>

<p>以 __ 开头的variable和method，后台会自动变成 _classname__xxx.</p>

<h3 id="97odds-and-ends">9.7. Odds and Ends</h3>

<p>一个空的class就可以用作C里面的struct</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
class Employee:

    pass



John = Employee()  # Create an empty employee record

</code></pre></div></div>

<p>然后就可以输入想要的成员：</p>

<p>john.name = ‘John Doe’</p>

<p>john.dept = ‘computer lab’</p>

<p>john.salary = 1000</p>

<h3 id="98exceptions-are-classes-too">9.8. Exceptions Are Classes Too</h3>

<p>也可以被继承。</p>

<h3 id="99iterators">9.9. Iterators</h3>

<p>For… in 语句其实就是用iter()来实现的，in实际上通过 .next()来获取下一个值。</p>

<h3 id="910generators">9.10. Generators</h3>

<p>是用来生成iterators的强力道具。</p>

<p>跟普通function一样，但用yield来输出数据（不用return是因为返回数据后还要继续运行）</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
def reverse(data):

    for index in range(len(data)-1, -1, -1):

        yield data[index]

</code></pre></div></div>

<h3 id="911generator-expressions">9.11. Generator Expressions</h3>

<p>用一行语句来直接设计并马上使用generator</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&gt;&gt;&gt; sum(I*I for I in range(10))                # sum of squares

285

</code></pre></div></div>

<h2 id="10brief-tour-of-the-standard-library">10. Brief Tour of the Standard Library</h2>

<h2 id="and-11-part2-see-another-note-call-the-standard-library-of-python">and 11. Part2， see another note call ‘the Standard Library of Python’</h2>

<h2 id="and-to-learn-more">And to learn more:</h2>

<p><a href="https://docs.python.org/2.7/library/index.html#library-index">The Python Standard Library</a></p>

<p>库的使用手册</p>

<p><a href="https://docs.python.org/2.7/install/index.html#install-index">Installing Python Modules (Legacy version)</a></p>

<p>如何安装其他用户的库</p>

<p><a href="https://docs.python.org/2.7/reference/index.html#reference-index">The Python Language Reference</a></p>

<p>Python语言手册</p>

<p><a href="https://www.python.org/">https://www.python.org</a></p>

<p>官网</p>

<p><a href="https://docs.python.org/">https://docs.python.org</a></p>

<p>python官方文档</p>

<p><a href="https://pypi.org/">https://pypi.org</a></p>

<p>python package index，用户提供的库，整理成的目录</p>

<p><a href="https://code.activestate.com/recipes/langs/python/">https://code.activestate.com/recipes/langs/python/</a></p>

<p>Python的代码例子、模板等</p>
</div>

<div class="PageNavigation">
  
    <a class="prev" href="/readmemo/read-fact.html">&laquo; 阅读笔记： 《事实》 - 汉斯</a>
  
  
</div>

  </body>
</html>
